# Lotsful AI Engine - 5タブ提案書システム 要件定義書

## プロジェクト概要

企業の業務切り出しを支援し、副業/兼業人材との最適なマッチングを実現するAI分析システム。
3ステップフローでの情報収集後、5タブ構成の包括的な提案書を生成する。

## システム構成

- **フロントエンド**: Next.js 15.3.3 + React 19 + TypeScript + Tailwind CSS
- **バックエンド**: Next.js API Routes (サーバーサイド処理)
- **AI**: Google Gemini 2.5 Flash Preview-05-20
- **データ**: セッションベース（データベース不要）
- **デプロイ**: Vercel + GitHub連携

## 機能要件

### 1. 既存機能（継続）
- 3ステップフロー（企業情報入力 → 課題入力 → 業務選択・AI分析）
- 7×4業務マトリックス（7カテゴリ × 4フェーズ）
- 業界自動判定機能（Step1 → Step3連携）
- Gemini API統合

### 2. 新機能：5タブ提案書システム

#### フェーズ1実装（優先度：高）
**Tab 1: 課題整理（自動生成）**
```
現状分析
企業名：[会社名]
業界：[業界]
従業員数：[規模]

課題マッピング
| 領域 | 現状 | 理想 | ギャップ |
|------|------|------|---------|
| [領域1] | [現状詳細] | [理想詳細] | [ギャップ分析] |
| [領域2] | [現状詳細] | [理想詳細] | [ギャップ分析] |
| [領域3] | [現状詳細] | [理想詳細] | [ギャップ分析] |

課題の深掘り
表面的な課題
[表面的に見えている問題]

本質的な課題
[真の原因・構造的な問題]

放置した場合の影響
- 短期（3ヶ月）: [具体的なリスク]
- 中期（6ヶ月）: [具体的なリスク]
- 長期（1年）: [具体的なリスク]
```

**Tab 2: プロジェクト設計（自動生成）**
```
プロジェクト概要
ミッション
[プロジェクトで実現すること]

スコープ定義
含むもの
✅ [スコープ1]
✅ [スコープ2]
✅ [スコープ3]

含まないもの
❌ [対象外1]
❌ [対象外2]

フェーズ設計
Phase 1: [フェーズ名]（[期間]）
目的: [このフェーズのゴール]

主要タスク
- [タスク1]
  詳細：[具体的な作業内容]
  期限：[日数/週数]
- [タスク2]
  詳細：[具体的な作業内容]
  期限：[日数/週数]

成果物
📄 [成果物1]
📊 [成果物2]
🔧 [成果物3]

マイルストーン: [具体的な達成基準]

Phase 2: [フェーズ名]（[期間]）
目的: [このフェーズのゴール]

主要タスク
- [タスク1]
  詳細：[具体的な作業内容]
  期限：[日数/週数]
- [タスク2]
  詳細：[具体的な作業内容]
  期限：[日数/週数]

成果物
📈 [成果物1]
🚀 [成果物2]

マイルストーン: [具体的な達成基準]
```

#### フェーズ2実装（優先度：中）
**Tab 3: 人材提案（手動生成ボタン）**
- 人材要件定義
  - 求める人材像
  - 必要スキルセット
  - 経験レベル
- 人材タイプ提案
  - コンサルタント系
  - 事業会社経験者
  - スタートアップ経験者
  - 専門スキル保有者
- 稼働条件
  - 想定工数（月10-80時間、デフォルト30時間）
  - リモートワーク前提
  - コミュニケーション頻度

**Tab 4: 期待成果（手動生成ボタン）**
- 定量的成果
  - ROI計算
  - コスト削減効果
  - 効率向上指標
- 定性的成果
  - 組織能力向上
  - プロセス改善
  - 競争力強化
- 時系列効果
  - 短期成果（1-3ヶ月）
  - 中期成果（3-6ヶ月）
  - 長期成果（6ヶ月以上）

**Tab 5: 実施要項（手動生成ボタン）**
- 契約形態
  - 準委任契約
  - 成果物ベース契約
  - 時間ベース契約
- 費用構造
  - 時間単価設定
  - 成果物単価
  - 支払い条件
- 実施体制
  - プロジェクト体制図
  - 役割分担
  - 報告ライン

## 技術要件

### AI分析エンジン拡張

#### 自動生成プロンプト（Tab1 & Tab2）
```
企業情報: {companyInfo}
選択業務: {selectedItems}
業界: {selectedIndustries}
課題: {challenges}

以下の形式で分析結果を出力:
## Tab1: 課題整理
### 企業分析サマリー
- 企業概要
- 業界ポジション
- 成長ステージ

### 課題分析
- 現状課題
- 課題構造
- 優先度

### 機会分析
- 改善ポテンシャル
- 競合優位性
- 市場機会

## Tab2: プロジェクト設計
### プロジェクト定義
- プロジェクト名
- 目的・ゴール
- スコープ

### アプローチ設計
- 戦略立案
- 実行・運用
- 分析・最適化
- 組織・体制構築

### 実行計画
- タイムライン
- マイルストーン
- KPI
```

#### 手動生成プロンプト（Tab3-5）
各タブごとに専用のプロンプトを用意し、ボタンクリックで個別生成

### UI/UX設計

#### タブナビゲーション
- 5タブの横スクロール対応
- アクティブタブの視覚的強調
- 生成状態の表示（自動/手動/未生成）

#### 生成ボタン配置
- Tab3-5各タブ内に「AI分析で生成」ボタン
- 生成中のローディング表示
- 生成エラー時の再試行機能

### APIエンドポイント設計

#### 既存API拡張
- `/api/analyze`: Tab1&2自動生成対応
- `/api/analyze-company`: 企業分析強化

#### 新規API
- `/api/generate-talent`: Tab3人材提案生成
- `/api/generate-outcome`: Tab4期待成果生成
- `/api/generate-implementation`: Tab5実施要項生成

## 実装計画

### フェーズ1（1週間）
1. 5タブUI構造実装
2. Tab1&2自動生成API開発
3. ProjectProposal コンポーネント拡張
4. 動作テスト・デバッグ

### フェーズ2（1週間）
1. Tab3-5手動生成ボタン実装
2. 個別生成API開発
3. UI/UX最適化
4. 総合テスト

## 制約事項

- 副業/兼業制約: リモート中心、月10-80時間（選択可能、デフォルト30時間）、準委任契約
- AI精度: 100%正確性不要、営業支援ツールとして十分な品質
- データ保持: セッションベース、永続化不要
- 対象業界: 40+業界対応
- 対象業務: 7カテゴリ×4フェーズ=28分野

## 成功指標

- Tab1&2自動生成: 90%以上の有用性
- ユーザビリティ: 3ステップ→5タブ遷移がスムーズ
- 提案品質: 営業現場で活用可能なレベル
- システム安定性: エラー発生時の適切なフォールバック

## 補足事項

- 現在のGemini 2.5 Flash Preview-05-20を継続使用
- 既存のmock data構造を5タブ形式に拡張
- 段階的リリース: Tab1&2 → Tab3-5の順次展開
